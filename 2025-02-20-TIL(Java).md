# TIL: JAVA
## 학습날짜: 2025년 2월 120일

## Problem:
- 동적 web page 구현을 위한 AJAX 실습 필요

## Solution:
- 영화진흥회 api, 카카오 다음 검색 api를 활용한 실습

## What I Learned

### jQuery AJAX
- $.ajax() method의 형태
- - $.ajax(options);
- - $.ajax(url, options);
- - Ajax가 성공했을 때 자동으로 success 실행
- - success handler의 첫 번째 매개 변수는 Ajax가 성공했을 때 서버로 부터 받은 데이터

- $.ajax() method 옵션
- - async : 동기, 비동기 지정 ( boolean )
- - complete : Ajax 완료 event handler 지정 ( function )
- - data : 요청 매개 변수 지정 ( 일반적으로 JSON )
- - error : Ajax 실패 event handler 지정 ( function )
- - success : Ajax 성공 event handler 지정 ( function )
- - timeout : 만료시간 지정 ( number )
- - type : “GET”, “POST” 지정 ( string )
- - url : 호출 대상 URL 지정 ( string )
- - dataType : 결과 데이터가 json 혹은 jsonp일 경우 설정 ( string )
- - jsonp : JSONP방식일 경우 서버로 보내질 hash값에 대한 Key ( string )

### api 요청 예시
- kakao api
```javascript
function searchImage(keyword, callback) {
    $.ajax({
        async: true,
        url: "https://dapi.kakao.com/v2/search/image",
        type: "GET",
        headers: {
            "Authorization": "KakaoAK {key}" // REST API 키
        },
        data: {
            query: keyword // 검색 키워드
        },
        dataType: "json",
        success: function(result) {
            if (result.documents.length > 0) {
                callback(result.documents[0].image_url); // 첫 번째 이미지 URL 반환
            } else {
                callback(null); // 이미지 없음
            }
        },
        error: function(xhr, status, error) {
            console.error("요청 실패:", status, error);
            callback(null);
        }
    });
}
```
- 영화진흥위원회 api
```javascript
$.ajax({
        async: true,    // 비동기 방식 혹은 동기방식인지 선택, 기본값은 비동기
        url: "http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json",
        type: "GET",
        data: {
            key: {key},
            targetDt: selectedDate
        },
        dataType: "json",
        success: function(result) {
            //  result 매개변수로 받은 JSON 문자열이 객체로 변환되어 매핑됨
            console.log("API 응답:", result); // 응답 데이터 확인

            if (!result || !result.boxOfficeResult || !result.boxOfficeResult.dailyBoxOfficeList) {
                console.error("박스오피스 데이터가 없습니다.");
                return;
            }
            movie = result.boxOfficeResult.dailyBoxOfficeList;
})
```
