### Book class
```java
package booksearch.vo;

public class Book {
    private String bisbn;
    private String btitle;
    private int bprice;
    private String bauthor;


    public Book() {
    }

    public Book(String bisbn, String btitle, int bprice, String bauthor) {
        this.bisbn = bisbn;
        this.btitle = btitle;
        this.bprice = bprice;
        this.bauthor = bauthor;
    }


    // Setter & Gettrer
    public String getBisbn() {
        return bisbn;
    }

    public void setBisbn(String bisbn) {
        this.bisbn = bisbn;
    }

    public String getBtitle() {
        return btitle;
    }

    public void setBtitle(String btitle) {
        this.btitle = btitle;
    }

    public int getBprice() {
        return bprice;
    }

    public void setBprice(int bprice) {
        this.bprice = bprice;
    }

    public String getBauthor() {
        return bauthor;
    }

    public void setBauthor(String bauthor) {
        this.bauthor = bauthor;
    }

}

```

### oracle 연결 class
```java
package booksearch.oracledbjdbc;

import javafx.collections.ObservableList;
import votest.vo.Book;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class OracleJDBC {
    private static String url = "jdbc:oracle:thin:@localhost:1521:xe";
    private static String username = "system";
    private static String password = "1234";

    public Connection getConnection() throws Exception {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        Connection con = DriverManager.getConnection(url, username, password);
        return con;
    }

    public ObservableList<Book> search(Connection con, ObservableList<Book> books, String keyword) throws Exception {
        String sql = "select bisbn, btitle, bprice, bauthor ";
        sql += "from book where btitle like ?";
        PreparedStatement pstmt = con.prepareStatement(sql);
        pstmt.setString(1, "%"+keyword+"%");
        ResultSet rs = pstmt.executeQuery();
        while (rs.next()) {
            Book book = new Book(rs.getString("bisbn"),rs.getString("btitle"),rs.getInt("bprice"),rs.getString("bauthor"));
            books.add(book);
        }
        return books;
    }

    public void deleteBook(Connection con, String bisbn) throws Exception {
        String sql = "delete from book where bisbn=?";
        PreparedStatement pstmt = con.prepareStatement(sql);
        pstmt.setString(1, bisbn);
        int rows = pstmt.executeUpdate();
        if (rows > 0) {
            System.out.println("Delete book by bisbn: "+bisbn);
        }
    }

    public void updateBook(Connection con, Book book, String column, String newValue) {

        String sql = "UPDATE book SET ";
        sql += column;
        sql += " = ? WHERE bisbn = ?";

        try (PreparedStatement pstmt = con.prepareStatement(sql)) {
            pstmt.setString(1, newValue);
            pstmt.setString(2, book.getBisbn());

            int rows = pstmt.executeUpdate();
            System.out.println("DB 업데이트 완료: " + column + " → " + newValue + " (" + rows + "개 반영)");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

```

### FXML controller class
```java
package booksearch.controller;

import booksearch.oracledbjdbc.OracleJDBC;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;
import javafx.scene.control.cell.TextFieldTableCell;
import javafx.util.converter.DefaultStringConverter;
import votest.vo.Book;

import java.net.URL;
import java.sql.Connection;
import java.util.ResourceBundle;

public class SearchButtonController implements Initializable {

    @FXML
    private TableView<Book> tableView;
    @FXML
    public TableColumn<Book, String> isbnCol;
    @FXML
    private TableColumn<Book, String> titleCol;
    @FXML
    public TableColumn<Book, Integer> priceCol;
    @FXML
    public TableColumn<Book, String> authorCol;

    @FXML
    private TextField inputText;
    @FXML
    private Button searchBtn;

    @FXML
    private Button deleteBtn;

    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        //  FXML이 load 될 때 메소드가 호출
        //  버튼이 클릭되면 TableView 에 데이터를 넣음
        tableView.setEditable(true);

        isbnCol.setCellValueFactory(new PropertyValueFactory<>("bisbn"));
        titleCol.setCellValueFactory(new PropertyValueFactory<>("btitle"));
        priceCol.setCellValueFactory(new PropertyValueFactory<>("bprice"));
        authorCol.setCellValueFactory(new PropertyValueFactory<>("bauthor"));

        searchBtn.setOnAction(event -> {
            searchBook();
        });
        deleteBtn.setOnAction(event -> {
            deleteBook();
        });

        updateBook(titleCol, "btitle");
        updateBook(authorCol, "bauthor");
    }

    private void searchBook(){
        String keyword = inputText.getText();

        ObservableList<Book> books =
                FXCollections.observableArrayList();

        Connection con = null;
        OracleJDBC oracleJDBC = new OracleJDBC();

        try {
            con = new OracleJDBC().getConnection();
            books = oracleJDBC.search(con,books,keyword);
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }

        tableView.setItems(books);
    }

    private void deleteBook(){
        Book selectedBook = tableView.getSelectionModel().getSelectedItem();
        if (selectedBook == null) {
            showAlert("삭제할 항목이 없습니다.");
            return;
        }
        Connection con = null;
        OracleJDBC oracleJDBC = new OracleJDBC();

        try {
            con = new OracleJDBC().getConnection();
            oracleJDBC.deleteBook(con, selectedBook.getBisbn());
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        tableView.refresh();
        showAlert("삭제 완료!");

    }

    private void updateBook(TableColumn<Book, String> column, String columnName) {
        column.setCellFactory(TextFieldTableCell.forTableColumn(new DefaultStringConverter()));

        column.setOnEditCommit(event -> {
            Book book = event.getRowValue();
            String newValue = event.getNewValue();

            switch (columnName) {
                case "title" -> book.setBtitle(newValue);
                case "author" -> book.setBauthor(newValue);
            }

            tableView.refresh(); // UI 업데이트
            Connection con = null;
            OracleJDBC oracleJDBC = new OracleJDBC();

            try {
                con = new OracleJDBC().getConnection();
                oracleJDBC.updateBook(con, book, columnName, newValue);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }

        });
    }

    private void showAlert(String message) {
        Alert alert = new Alert(Alert.AlertType.INFORMATION);
        alert.setTitle("알림");
        alert.setHeaderText(null);
        alert.setContentText(message);
        alert.showAndWait();
    }
}
```

### .FXML file
```xml
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.text.Font?>


<BorderPane fx:controller="booksearch.controller.SearchButtonController" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="650.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1">
   <center>
      <TableView fx:id="tableView" prefHeight="483.0" prefWidth="703.0" BorderPane.alignment="CENTER">
        <columns>
          <TableColumn fx:id="isbnCol" prefWidth="83.0" text="ISBN" />
          <TableColumn fx:id="titleCol" prefWidth="307.5" text="Title" />
          <TableColumn fx:id="priceCol" prefWidth="91.5" text="Price" />
          <TableColumn fx:id="authorCol" prefWidth="167.0" text="Author" />
        </columns>
      </TableView>
   </center>
   <bottom>
      <FlowPane prefHeight="70.0" prefWidth="600.0" BorderPane.alignment="CENTER">
         <children>
            <Label text="searching">
               <FlowPane.margin>
                  <Insets bottom="25.0" left="25.0" right="25.0" top="25.0" />
               </FlowPane.margin>
               <font>
                  <Font size="18.0" />
               </font>
            </Label>
            <TextField fx:id="inputText" prefHeight="22.0" prefWidth="383.0">
               <font>
                  <Font size="14.0" />
               </font>
            </TextField>
            <Button fx:id="searchBtn" mnemonicParsing="false" text="search">
               <FlowPane.margin>
                  <Insets left="20.0" />
               </FlowPane.margin>
            </Button>
            <Button fx:id="deleteBtn" mnemonicParsing="false" text="Delete">
               <FlowPane.margin>
                  <Insets left="10.0" />
               </FlowPane.margin>
            </Button>
         </children>
      </FlowPane>
   </bottom>
</BorderPane>
```

### main 실행 class
```java
package booksearch;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

public class Main extends Application {
    @Override
    public void start(Stage stage) throws Exception {

        Parent root = null;
        FXMLLoader loader =
                new FXMLLoader(getClass().getResource("tableviewexample.fxml"));

        try {
            root = loader.load();
        } catch (Exception e){
            e.printStackTrace();
        }
        Scene scene = new Scene(root);
        stage.setScene(scene);
        stage.show();

    }

    public static void main(String[] args) {
        launch(args);
    }
}
```
