# TIL: JAVA
## 학습날짜: 2025년 2월 10일

## Problem:
- 

## Solution:
- 

## What I Learned

### JDBC
- `JDBC`: Java를 이용하여 Database에 있는 값을 활용하기 위한 API
- `JDBC Driver`: Java 응용 프로그램이 데이터베이스와 상호 작용할 수 있도록 하는 소프트웨어 구성 요소(class & interface)
- DBMS는 굉장히 다양한 종류가 존재 (oracle db, mySQL ...)
- 각 DBMS vendor는 Java program을 이용해 자사의 DBMS를 사용할 수 있도록 특별히 제작된 class와 interface들을 제공(vendor들 마다 구현한 내용이 각기 다름.) 
- 굉장히 많은 class와 interface를 제공하는데 이 중 가장 중요한 역할을 담당하는 JDBC Driver(`DBMS와의 통신을 담당하는 class인 Driver class`)

### JDBC 활용 전체 과정
- JDBC 는 크게 6개의 단계로 사용
 1. (JDBC)Driver Loading
   - 프로그램에서 딱 1번만 수행
 2. database 연결
      - 만약 연결이 성공하면 연결 객체가 생성
      - java.sql.Connection Class
      - 연결을 위해 3가지 정보가 필요
      - 어떤 데이터베이스에 접속하는지에 대한 정보(문자열) => JDBC URL
      - ID / PW 필요
 3. SQL 을 작성 => PreparedStatement 를 생성
 4. Query 실행
  - executeUpdate(): SQL 구문이 INSERT, UPDATE, DELETE 계열일 경우 사용
  - executeQuery(): SQL 구문이 SELECT 일 경우
 5. 결과처리
  - executeUpdate(): 리턴값은 SQL 에 의해서 영향을 받은 행의 수
  - executeQuery(): ResultSet 이 결과로 나옴
 6. 리소스 해제
  - 자원,리소스 해제
  - Connection, PreparedStatement, ResultSet
  - 사용된 자원을 해제( close() )를 호출
  - 해제는 생성의 역순

### ResultSet 처리
- next()를 이용해 커서를 이동
- getString(컬럼명) or getString(컬럼순번) 값 가져옴
```java
            ResultSet rs = ps.executeQuery();

            //  컬럼 명 이용
            while(rs.next()){
                System.out.println(rs.getString("btitle") + "\t"
                + rs.getString("bauthor") + "\t"
                + rs.getString("bprice"));
            }
            //  컬럼 순서 이용
            //  while(rs.next()){
                System.out.println(rs.getString(1) + "\t"
                + rs.getString(2) + "\t"
                + rs.getString(3));
            }
```

### 동적 SQL 처리
```java
            String keyword = sc.nextLine();

            String sql = "SELECT btitle, bauthor, bprice";
            // 데이터 사용 부분을 ?로 처리
            sql += " FROM book WHERE BTITLE LIKE ?";
            // PreparedStatement 객체 생성 시 미완성 된 SQL 등록
            PreparedStatement ps = con.prepareStatement(sql);
            // ? 처리한 값을 대입
            ps.setString(1, "%" + keyword + "%");
            // 이미 등록된 SQL 실행
            ResultSet rs = ps.executeQuery();
```

### Transaction
- 작업의 최소 단위 ( ex. SQL 구문 5개를 하나의 Transaction으로 설정)
- ACID 를 위한 논리적 단위
- Atomicite(원자성
- Consistency(일치성)
- Isolation(독립성)
- Durability(영구성)
- JDBC를 이용하여 Connection에 설정가능
