# TIL: JAVA
## 학습날짜: 2025년 2월 18일

## Problem:
- 동적 web page 구현이 어려움

## Solution:
- JSP를 활용한 실습을 통해 동적 페이지 구현

## What I Learned

### Web Browser
```
1. HTML의 내용을 DOM 구조로 생성
2. CSS의 내용을 CSSOM 생성
3. 두가지를 합쳐 Render Tree생성하여 화면에 보여줌
```
- Http protocol은 stateless protocol

### Cookie
- Client Web Browser에 문자열로 저잗되는 유효기간, 유효 도메인, client 정보등을 포함하는 정보
- Servlet에서 Cookie 문자열을 생성 후 response 객체를 이용해 client 측에 header로 전달해 설정
- Client는 Http request header에 Cookie를 포함하여 Servlet에 요청
- Client에 저장되므로 보안성이 없음
- 문자열로 저장되기 때문에 후처리가 필요함
- 길이 제한이 있기 때문에 많은 양의 데이터 전송이 어려

### Session
- HttpSession Class의 Instance
- WAS내부에 저장
- Cookie를 이용
```java
            HttpSession session = req.getSession();
//            req.getSession(false);
//            기존에 할당 되어 있는 session 객체가 이미 존재하면 가져옴
//            없을 경우 null 리턴
            session.setAttribute("member", member);
//            setAttribute 이옹해서 값을 저장
//            getAttribute 이용해서 값을 가져옴

//            invalidate() : 세션을 무효화 시킴
```

### JSP
- round-trip 방식
- servlet의 다른 형태
- `requestDispatcher`: HttpRequest를 다른 servlet에 넘겨줄 수 있음
- 결과로 보여지는 화면이 정적 화면일 경우
- - html file 작성 후 servlet에서 연결
```java
        if (login) {
            // 로그인 성공
            MemberVO member = new MemberVO(ID, password, null);

            HttpSession session = req.getSession();
            session.setAttribute("member", member);
        } else {
            // 로그인 실패
            resp.sendRedirect("loginError.html");
        }
```
- 결과로 보여지는 화면이 정적 화면일 경우
- - html file 내부에 Java 코드를 넣어서 표현(JSP)
```jsp
<%@ page import="org.example.loginproject.vo.MemberVO" %>

<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
<head>
    <title>Title</title>
</head>
<%--Scriptlet: 일반 자바 코드--%>
<%
    //  request 객체를 이용해서 "hoho" 로 명명한 member 객체를 가져오기
    //  member 객체의 name 가져오기
    //  JSP 에서는 request, response 이름이 정해져 있음
    MemberVO member = (MemberVO) request.getAttribute("hoho");
%>
<%--expression: 문자열을 단독으로 출력--%>

<body>
    <h1>로그인에 성공했습니다</h1>
    <%--expression: 문자열을 단독으로 출력--%>
    <h1><%=member.getName()%>님 환영합니다.</h1>
    <a href="/board">게시판 보기</a>
</body>
</html>

```

