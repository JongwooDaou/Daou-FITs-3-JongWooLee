### controller
```java
package booksearchmvc.controller;

import booksearchmvc.service.BookSearchMVCService;
import booksearchmvc.service.BookSearchMVCServiceOracleImpl;
import booksearchmvc.vo.BookVO;
import javafx.collections.ObservableList;
import javafx.fxml.FXML;
import javafx.fxml.Initializable;
import javafx.scene.control.*;
import javafx.scene.control.cell.PropertyValueFactory;

import java.net.URL;
import java.util.ResourceBundle;

public class BookSearchMVCController implements Initializable{
    @FXML
    public TableView<BookVO> bookTbl;
    @FXML
    public TextField searchText;
    @FXML
    public Button searchBtn;
    @FXML
    public Button deleteBtn;
    @FXML
    public TableColumn<BookVO, String> isbnCol;
    @FXML
    public TableColumn<BookVO, String> titleCol;
    @FXML
    public TableColumn<BookVO, Integer> priceCol;
    @FXML
    public TableColumn<BookVO, String> authorCol;

    private String deleteIsbn;


    @Override
    public void initialize(URL url, ResourceBundle resourceBundle) {
        // VO와 컬럼 매핑
        isbnCol.setCellValueFactory(new PropertyValueFactory<>("bisbn"));
        titleCol.setCellValueFactory(new PropertyValueFactory<>("btitle"));
        priceCol.setCellValueFactory(new PropertyValueFactory<>("bprice"));
        authorCol.setCellValueFactory(new PropertyValueFactory<>("bauthor"));

        bookTbl.setRowFactory(e -> {
                    TableRow<BookVO> row = new TableRow<>();
                    row.setOnMouseClicked(event -> {
                        if (event.getClickCount() == 1) {
                            deleteIsbn = row.getItem().getBisbn();
                        }
                    });
                    return row;
                }

        );


        searchBtn.setOnAction(event -> {
            // button 이 클릭되면 키워드를 이요한 검색 작업 진행
            // logic 처리 위해서 Service 객체 생성
            BookSearchMVCService service =
                    new BookSearchMVCServiceOracleImpl();
            String keyword = searchText.getText();
            ObservableList<BookVO> list = null;
            try {
                list = service.searchBookByKeyword(keyword);
            } catch (Exception e) {
                System.out.println(e.getMessage());
            }
            bookTbl.setItems(list);

        });

        deleteBtn.setOnAction(event -> {
            BookSearchMVCService service =
                    new BookSearchMVCServiceOracleImpl();
            ObservableList<BookVO> list =
                    service.deleteSelectedBook(deleteIsbn,
                            searchText.getText());
            bookTbl.setItems(list);
        });
    }
}

```
### Service
```java
package booksearchmvc.service;

import booksearchmvc.vo.BookVO;
import javafx.collections.ObservableList;

public interface BookSearchMVCService {
    ObservableList<BookVO> searchBookByKeyword(String keyword) throws Exception;

    ObservableList<BookVO> deleteSelectedBook(String deleteIsbn, String keyword);
}
```
### ServiceImp
```java
package booksearchmvc.service;

import booksearchmvc.dao.BookDAO;
import booksearchmvc.vo.BookVO;
import javafx.collections.ObservableList;

import java.sql.Connection;
import java.sql.DriverManager;

public class BookSearchMVCServiceOracleImpl implements BookSearchMVCService {

    public BookSearchMVCServiceOracleImpl() {
        try{
            Class.forName("oracle.jdbc.driver.OracleDriver");
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public ObservableList<BookVO> searchBookByKeyword(String keyword) throws Exception {

        String url = "jdbc:oracle:thin:@localhost:1521:xe";
        String id = "system";
        String password = "1234";
        Connection con = DriverManager.getConnection(url, id, password);

        con.setAutoCommit(false);   //  transaction 시작
        // 1
        // 2
        // 3 로직 완료
        // con.commit() or con.rollback()

        BookDAO bookDAO= new BookDAO(con);

        ObservableList<BookVO> list = bookDAO.select(keyword);
        if(list != null){
            con.commit();
        }else {
            con.rollback();
        }

        return list;
    }

    @Override
    public ObservableList<BookVO> deleteSelectedBook(String deleteIsbn, String text) {
        return null;
    }
}
```
### DAO
```java
package booksearchmvc.dao;

import booksearchmvc.vo.BookVO;
import javafx.collections.FXCollections;
import javafx.collections.ObservableList;

import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class BookDAO {

    private Connection con;

    public BookDAO(Connection con) {
        this.con = con;
    }

    public ObservableList<BookVO> select(String keyword) {
        ObservableList<BookVO> books = FXCollections.observableArrayList();
        try {

            String sql = "select bisbn, btitle, bprice, bauthor";
            sql += " from book where btitle like ?";
            PreparedStatement ps = con.prepareStatement(sql);
            ps.setString(1, "%" + keyword + "%");
            ResultSet rs = ps.executeQuery();
            while (rs.next()) {
                BookVO book = new BookVO(
                        rs.getString(1),
                        rs.getString(2),
                        rs.getInt(3),
                        rs.getString(4)
                );
                books.add(book);

            }
            rs.close();
            ps.close();
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
        return books;
    }
}
```
### View
```java
package booksearchmvc.view;

import javafx.application.Application;
import javafx.fxml.FXMLLoader;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.stage.Stage;

import java.io.IOException;

public class BookSearchMVCView extends Application {
    @Override
    public void start(Stage stage) {
        Parent root = null;
        FXMLLoader loader =
                new FXMLLoader(getClass().getResource("booksearchmvc.fxml"));
        try{
            root = loader.load();

            Scene scene = new Scene(root);
            stage.setScene(scene);
            stage.setTitle("Book Search MVC");
            stage.show();

        } catch (IOException e){
            System.out.println(e.getMessage());
        }

    }

    public static void main(String[] args) {
        launch(args);
    }
}
```
### FXML
```xml
<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.FlowPane?>
<?import javafx.scene.text.Font?>


<BorderPane fx:controller="booksearchmvc.controller.BookSearchMVCController" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1">
   <center>
      <TableView fx:id="bookTbl" prefHeight="200.0" prefWidth="200.0" BorderPane.alignment="CENTER">
        <columns>
          <TableColumn fx:id="isbnCol" prefWidth="75.0" text="ISBN" />
          <TableColumn fx:id="titleCol" prefWidth="311.5" text="Title" />
            <TableColumn fx:id="priceCol" prefWidth="106.5" text="Price" />
            <TableColumn fx:id="authorCol" prefWidth="106.0" text="Author" />
        </columns>
      </TableView>
   </center>
   <bottom>
      <FlowPane prefHeight="80.0" prefWidth="600.0" BorderPane.alignment="CENTER">
         <children>
            <Label text="keyword">
               <font>
                  <Font size="14.0" />
               </font>
               <FlowPane.margin>
                  <Insets bottom="30.0" left="60.0" right="30.0" top="30.0" />
               </FlowPane.margin>
            </Label>
            <TextField fx:id="searchText" prefHeight="22.0" prefWidth="250.0">
               <FlowPane.margin>
                  <Insets right="30.0" />
               </FlowPane.margin>
            </TextField>
            <Button fx:id="searchBtn" mnemonicParsing="false" prefWidth="53.0" text="search">
               <FlowPane.margin>
                  <Insets left="10.0" />
               </FlowPane.margin>
            </Button>
            <Button fx:id="deleteBtn" mnemonicParsing="false" prefWidth="56.0" text="delete">
               <FlowPane.margin>
                  <Insets left="10.0" />
               </FlowPane.margin>
            </Button>
         </children>
      </FlowPane>
   </bottom>
</BorderPane>
```
### VO
```java
package booksearchmvc.vo;

public class BookVO {
    private String bisbn;
    private String btitle;
    private int bprice;
    private String bauthor;


    public BookVO() {
    }

    public BookVO(String bisbn, String btitle, int bprice, String bauthor) {
        this.bisbn = bisbn;
        this.btitle = btitle;
        this.bprice = bprice;
        this.bauthor = bauthor;
    }


    // Setter & Gettrer
    public String getBisbn() {
        return bisbn;
    }

    public void setBisbn(String bisbn) {
        this.bisbn = bisbn;
    }

    public String getBtitle() {
        return btitle;
    }

    public void setBtitle(String btitle) {
        this.btitle = btitle;
    }

    public int getBprice() {
        return bprice;
    }

    public void setBprice(int bprice) {
        this.bprice = bprice;
    }

    public String getBauthor() {
        return bauthor;
    }

    public void setBauthor(String bauthor) {
        this.bauthor = bauthor;
    }

}
```
